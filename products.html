<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products - Green Valley Farmers</title>
    <meta name="description" content="Browse our fresh organic produce including vegetables, fruits, dairy, and grains from local farms.">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Skip to Content Link (Accessibility) -->
    <a href="#main-content" class="skip-to-content">Skip to Content</a>

    <!-- Header -->
    <header>
        <div class="container header-container">
            <a href="index.html" class="logo">
                <i class="fas fa-seedling logo-icon"></i>
                <span class="logo-text">Green Valley Farmers</span>
            </a>
            
            <button class="mobile-menu-btn" aria-label="Toggle menu">
                <i class="fas fa-bars"></i>
            </button>
            
            <nav class="main-nav" aria-label="Main navigation">
                <ul class="nav-links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="products.html" class="active">Products</a></li>
                    <li><a href="cart.html">Cart <span class="cart-count">0</span></a></li>
                    <li><a href="#" class="btn btn-accent">Farmer Login</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main id="main-content">
        <!-- Page Header -->
        <section class="page-header" style="background-color: var(--primary-color); color: white; padding: 40px 0;">
            <div class="container">
                <h1 style="color: white; margin-bottom: 10px;">Our Products</h1>
                <p style="opacity: 0.9;">Fresh, organic produce from local farms</p>
            </div>
        </section>

        <!-- Product Filters -->
        <section style="padding: 30px 0; background-color: #f5f9f0;">
            <div class="container">
                <div class="products-filter">
                    <button class="filter-btn active" data-filter="all">All Products</button>
                    <button class="filter-btn" data-filter="vegetables">
                        <i class="fas fa-carrot"></i> Vegetables
                    </button>
                    <button class="filter-btn" data-filter="fruits">
                        <i class="fas fa-apple-alt"></i> Fruits
                    </button>
                    <button class="filter-btn" data-filter="dairy">
                        <i class="fas fa-cheese"></i> Dairy
                    </button>
                    <button class="filter-btn" data-filter="grains">
                        <i class="fas fa-bread-slice"></i> Grains
                    </button>
                </div>
                
                <!-- Search Bar -->
                <div style="max-width: 500px; margin: 20px auto;">
                    <div class="form-group" style="position: relative;">
                        <input type="text" id="product-search" placeholder="Search products..." 
                               style="padding-right: 50px; width: 100%;">
                        <button type="button" id="search-btn" 
                                style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); 
                                       background: none; border: none; color: var(--secondary-color); font-size: 1.2rem;">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Products Grid -->
        <section class="products-section">
            <div class="container">
                <div class="products-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                    <h2 style="margin: 0;">Fresh From Our Farms</h2>
                    <div style="color: #666; font-size: 0.95rem;">
                        Showing <span id="product-count">8</span> products
                    </div>
                </div>
                
                <div class="products-grid" id="products-grid">
                    <!-- Products will be loaded by JavaScript -->
                    <div class="loading">
                        <i class="fas fa-spinner fa-spin"></i> Loading products...
                    </div>
                </div>
                
                <!-- No Results Message (hidden by default) -->
                <div id="no-results" class="error-state" style="display: none;">
                    <div class="error-icon">
                        <i class="fas fa-search"></i>
                    </div>
                    <h3>No Products Found</h3>
                    <p>Try adjusting your search or filter criteria.</p>
                    <button id="clear-filters" class="btn" style="margin-top: 20px;">
                        Clear All Filters
                    </button>
                </div>
            </div>
        </section>

        <!-- Farmer Information -->
        <section style="background-color: white; padding: 60px 0;">
            <div class="container">
                <h2 class="section-title">Meet Our Farmers</h2>
                
                <div class="farmers-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px; margin-top: 40px;">
                    <div class="farmer-card" style="text-align: center; padding: 30px; border-radius: var(--border-radius); background-color: #f9f9f9;">
                        <div style="width: 100px; height: 100px; background-color: #e8f0e1; border-radius: 50%; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; font-size: 40px;">
                            <i class="fas fa-user-tie"></i>
                        </div>
                        <h3>Green Valley Organic Farm</h3>
                        <p>Family-owned since 1985, specializing in organic vegetables and sustainable farming practices.</p>
                    </div>
                    
                    <div class="farmer-card" style="text-align: center; padding: 30px; border-radius: var(--border-radius); background-color: #f9f9f9;">
                        <div style="width: 100px; height: 100px; background-color: #e8f0e1; border-radius: 50%; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; font-size: 40px;">
                            <i class="fas fa-user-tie"></i>
                        </div>
                        <h3>Sunny Orchard</h3>
                        <p>Third-generation orchard with over 50 varieties of apples, peaches, and citrus fruits.</p>
                    </div>
                    
                    <div class="farmer-card" style="text-align: center; padding: 30px; border-radius: var(--border-radius); background-color: #f9f9f9;">
                        <div style="width: 100px; height: 100px; background-color: #e8f0e1; border-radius: 50%; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; font-size: 40px;">
                            <i class="fas fa-user-tie"></i>
                        </div>
                        <h3>Happy Cow Dairy</h3>
                        <p>Pasture-raised dairy cows producing premium milk, cheese, and yogurt products.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-about">
                    <div class="footer-logo">
                        <i class="fas fa-seedling"></i> Green Valley Farmers
                    </div>
                    <p>Connecting local farmers with communities through sustainable agriculture and fresh, organic produce since 2010.</p>
                    <div class="social-icons">
                        <a href="#" class="social-icon" aria-label="Facebook">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="social-icon" aria-label="Twitter">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="social-icon" aria-label="Instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="social-icon" aria-label="YouTube">
                            <i class="fab fa-youtube"></i>
                        </a>
                    </div>
                </div>
                
                <div class="footer-links">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="products.html">Products</a></li>
                        <li><a href="cart.html">Shopping Cart</a></li>
                        <li><a href="checkout.html">Checkout</a></li>
                    </ul>
                </div>
                
                <div class="footer-links">
                    <h4>Product Categories</h4>
                    <ul>
                        <li><a href="products.html?filter=vegetables">Vegetables</a></li>
                        <li><a href="products.html?filter=fruits">Fruits</a></li>
                        <li><a href="products.html?filter=dairy">Dairy</a></li>
                        <li><a href="products.html?filter=grains">Grains</a></li>
                    </ul>
                </div>
                
                <div class="footer-links">
                    <h4>Contact Us</h4>
                    <p>123 Farm Road, Green Valley, CA 90210</p>
                    <p>Email: info@greenvalleyfarmers.com</p>
                    <p>Phone: (555) 123-4567</p>
                </div>
            </div>
            
            <div class="copyright">
                <p>&copy; 2023 Green Valley Farmers. All rights reserved. | Designed with HCI principles for accessibility and user experience</p>
            </div>
        </div>
    </footer>

    <script src="data.js"></script>
    <script src="script.js"></script>
    <script>
        // Enhanced product loading with search functionality
        document.addEventListener('DOMContentLoaded', function() {
            loadProductsWithSearch();
            
            // Search functionality
            const searchInput = document.getElementById('product-search');
            const searchBtn = document.getElementById('search-btn');
            const clearFiltersBtn = document.getElementById('clear-filters');
            
            if (searchBtn) {
                searchBtn.addEventListener('click', function() {
                    filterProductsBySearch();
                });
            }
            
            if (searchInput) {
                searchInput.addEventListener('keyup', function(e) {
                    if (e.key === 'Enter') {
                        filterProductsBySearch();
                    }
                });
            }
            
            if (clearFiltersBtn) {
                clearFiltersBtn.addEventListener('click', function() {
                    // Clear search
                    if (searchInput) searchInput.value = '';
                    
                    // Reset filter buttons
                    const filterButtons = document.querySelectorAll('.filter-btn');
                    filterButtons.forEach(btn => {
                        if (btn.getAttribute('data-filter') === 'all') {
                            btn.classList.add('active');
                        } else {
                            btn.classList.remove('active');
                        }
                    });
                    
                    // Reload all products
                    loadProductsWithSearch();
                });
            }
            
            // Check URL for filter parameter
            const urlParams = new URLSearchParams(window.location.search);
            const filterParam = urlParams.get('filter');
            if (filterParam) {
                // Activate corresponding filter button
                const filterButton = document.querySelector(`.filter-btn[data-filter="${filterParam}"]`);
                if (filterButton) {
                    document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
                    filterButton.classList.add('active');
                    filterProducts(filterParam);
                }
            }
        });
        
        function loadProductsWithSearch() {
            const productsGrid = document.getElementById('products-grid');
            const noResultsDiv = document.getElementById('no-results');
            const productCountSpan = document.getElementById('product-count');
            
            if (!productsGrid) return;
            
            let filteredProducts = [...products];
            const searchInput = document.getElementById('product-search');
            const activeFilter = document.querySelector('.filter-btn.active')?.getAttribute('data-filter');
            
            // Apply search filter
            if (searchInput && searchInput.value.trim()) {
                const searchTerm = searchInput.value.trim().toLowerCase();
                filteredProducts = filteredProducts.filter(product => 
                    product.name.toLowerCase().includes(searchTerm) ||
                    product.description.toLowerCase().includes(searchTerm) ||
                    product.category.toLowerCase().includes(searchTerm)
                );
            }
            
            // Apply category filter
            if (activeFilter && activeFilter !== 'all') {
                filteredProducts = filteredProducts.filter(product => product.category === activeFilter);
            }
            
            // Update product count
            if (productCountSpan) {
                productCountSpan.textContent = filteredProducts.length;
            }
            
            // Show/hide no results message
            if (noResultsDiv) {
                if (filteredProducts.length === 0) {
                    noResultsDiv.style.display = 'block';
                    productsGrid.style.display = 'none';
                } else {
                    noResultsDiv.style.display = 'none';
                    productsGrid.style.display = 'grid';
                }
            }
            
            // Render products
            productsGrid.innerHTML = '';
            
            if (filteredProducts.length === 0) {
                return;
            }
            
            filteredProducts.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.setAttribute('data-category', product.category);
                
                productCard.innerHTML = `
                    <div class="product-image">
                        ${product.image}
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">${product.name}</h3>
                        <p class="product-description">${product.description}</p>
                        <div class="product-rating">
                            <span>â˜…</span>
                            <span>${product.rating}</span>
                            <span>(${product.reviews} reviews)</span>
                        </div>
                        <div class="product-price">${formatPrice(product.price)} ${product.unit}</div>
                        <div style="display: flex; gap: 10px; margin-top: 15px;">
                            <a href="product-detail.html?id=${product.id}" class="btn" style="flex: 2;">View Details</a>
                            <button class="btn btn-accent add-to-cart-quick" 
                                    data-product-id="${product.id}"
                                    style="flex: 1; min-width: auto; padding: 12px;">
                                <i class="fas fa-cart-plus"></i>
                            </button>
                        </div>
                    </div>
                `;
                
                productsGrid.appendChild(productCard);
            });
            
            // Add event listeners for quick add to cart buttons
            document.querySelectorAll('.add-to-cart-quick').forEach(button => {
                button.addEventListener('click', function() {
                    const productId = this.getAttribute('data-product-id');
                    const originalHTML = this.innerHTML;
                    
                    if (addToCart(productId, 1)) {
                        this.innerHTML = '<i class="fas fa-check"></i>';
                        this.style.backgroundColor = 'var(--success-color)';
                        
                        showToast('success', 'Product added to cart!');
                        updateCartCount();
                        
                        setTimeout(() => {
                            this.innerHTML = originalHTML;
                            this.style.backgroundColor = '';
                        }, 1500);
                    } else {
                        showToast('error', 'Failed to add product to cart.');
                    }
                });
            });
        }
        
        function filterProductsBySearch() {
            loadProductsWithSearch();
        }
        
        // Override the filterProducts function from script.js
        function filterProducts(filter) {
            loadProductsWithSearch();
        }
    </script>
</body>
</html>